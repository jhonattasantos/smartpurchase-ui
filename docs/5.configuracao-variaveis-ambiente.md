# Guia de Variáveis de Ambiente no Vite

Este documento explica como as variáveis de ambiente são configuradas e utilizadas em um projeto Vite, garantindo que a aplicação possa se comportar de maneira diferente em ambientes distintos (desenvolvimento, produção, testes) e que segredos (como chaves de API) não sejam expostos no controle de versão.

## 1. Como o Vite Gerencia Variáveis de Ambiente

O Vite utiliza [DotEnv](https://github.com/motdotla/dotenv) para carregar variáveis de ambiente de arquivos `.env` localizados na raiz do projeto.

### 1.1. Arquivos `.env`

O Vite carrega os arquivos `.env` seguindo uma hierarquia específica. Um arquivo com maior precedência sobrescreve as variáveis de um arquivo com menor precedência.

1.  `.env.local`: **Maior precedência.** Usado para variáveis locais que não devem ser versionadas (ex: segredos). É ignorado pelo Git por padrão.
2.  `.env.[mode]`: Usado para variáveis específicas de um modo (ex: `.env.development`, `.env.production`).
3.  `.env`: **Menor precedência.** Usado para variáveis padrão que podem ser compartilhadas e versionadas.

### 1.2. Expondo Variáveis para o Cliente

Por segurança, o Vite expõe para o código do lado do cliente (navegador) **apenas as variáveis que começam com o prefixo `VITE_`**. Qualquer outra variável definida nos arquivos `.env` só estará disponível no ambiente Node.js do Vite (ex: no arquivo `vite.config.ts`), mas não no código da aplicação.

**Exemplo de definição:**
```
# .env
VITE_API_URL="https://api.exemplo.com"
SECRET_KEY="isso-nao-sera-exposto-no-cliente"
```

**Exemplo de acesso no código:**
```typescript
// Em um componente React
console.log(import.meta.env.VITE_API_URL); // "https://api.exemplo.com"
console.log(import.meta.env.SECRET_KEY); // undefined
```

## 2. Variáveis de Ambiente Internas do Vite

O Vite fornece um conjunto de variáveis úteis através do objeto `import.meta.env` que não precisam ser definidas manualmente.

### 2.1. `import.meta.env.MODE`

Esta é a variável mais importante para a lógica condicional. Ela indica em qual **"modo"** a aplicação está sendo executada.

-   **`'development'`**: Quando você roda `npm run dev` (ou `vite`).
-   **`'production'`**: Quando você roda `npm run build` (ou `vite build`).
-   **`'test'`**: Quando você roda testes com Vitest.

O valor de `MODE` determina qual arquivo `.env.[mode]` será carregado. Por exemplo, se `MODE` for `'development'`, o Vite carregará `.env.development`.

**Uso Prático:** Nós usamos `MODE` em `src/main.tsx` para iniciar o servidor mock do MirageJS apenas durante o desenvolvimento:
```typescript
if (import.meta.env.MODE === 'development') {
  makeServer();
}
```

### 2.2. Outras Variáveis Úteis

-   `import.meta.env.DEV`: Booleano. `true` se `MODE` for `'development'`, senão `false`.
-   `import.meta.env.PROD`: Booleano. `true` se `MODE` for `'production'`, senão `false`.
-   `import.meta.env.BASE_URL`: A URL base a partir da qual a aplicação é servida.
-   `import.meta.env.SSR`: Booleano. `true` se o código estiver sendo executado em um ambiente de Server-Side Rendering.

## 3. Boas Práticas Adotadas no Projeto

Para gerenciar as variáveis de ambiente de forma segura e colaborativa, seguimos duas práticas essenciais:

### 3.1. Ignorando Arquivos `.env` no Git

Arquivos `.env` (especialmente `.env.local`) podem conter informações sensíveis. Para evitar que sejam enviados ao repositório, o arquivo `.gitignore` foi configurado da seguinte forma:

```
# .gitignore
# Ignora todos os arquivos .env...
.env*
# ... exceto o arquivo de exemplo.
!.env.sample
```

### 3.2. Usando um Arquivo de Exemplo (`.env.sample`)

Foi criado um arquivo `.env.sample` que é versionado no Git. Ele serve como um template para que outros desenvolvedores ou ambientes de CI/CD saibam quais variáveis de ambiente são necessárias para rodar o projeto.

**Conteúdo do `.env.sample`:**
```
# Arquivo de exemplo para variáveis de ambiente
# Copie este arquivo para .env e preencha com os valores para seu ambiente de desenvolvimento

VITE_API_URL="http://localhost:3000/api"
```
Isso garante que qualquer pessoa que clone o projeto possa criar seu próprio arquivo `.env` a partir do `.env.sample` e começar a desenvolver rapidamente.