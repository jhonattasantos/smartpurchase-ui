# Configuração da Cobertura de Testes com Vitest

Este documento explica como a funcionalidade de cobertura de testes (test coverage) foi configurada para o projeto, permitindo a análise de quais partes do código estão sendo efetivamente testadas.

## 1. O que é Cobertura de Testes?

A cobertura de testes é uma métrica que indica a porcentagem do código-fonte que é executada durante a execução da suíte de testes. Ela ajuda a identificar áreas do código que não possuem testes e que podem conter bugs não detectados. Embora 100% de cobertura não garanta a ausência de bugs, uma cobertura baixa é um forte indicador de que a qualidade dos testes pode ser melhorada.

## 2. Instalação da Dependência

O Vitest utiliza provedores de cobertura para coletar os dados. O provedor recomendado e utilizado neste projeto é o `v8`. Para isso, a seguinte dependência de desenvolvimento foi instalada:

```bash
npm install -D @vitest/coverage-v8
```

## 3. Configuração no `vite.config.ts`

Para habilitar a coleta de dados de cobertura durante a execução dos testes, a propriedade `test.coverage` foi adicionada ao arquivo `vite.config.ts`:

```typescript
// vite.config.ts
export default defineConfig({
  // ...
  test: {
    // ...
    coverage: {
      provider: 'v8', // Especifica o provedor a ser usado
      reporter: ['text', 'html'], // Formatos do relatório: 'text' para o terminal e 'html' para um relatório detalhado
      exclude: [ // Arquivos e diretórios a serem ignorados na análise de cobertura
        'node_modules/',
        'src/main.tsx',
        'src/App.tsx',
        'src/mirage/',
      ],
    },
  },
});
```
A opção `exclude` é importante para evitar que a métrica de cobertura seja "suja" por arquivos que não são relevantes para os testes de unidade/componente, como arquivos de inicialização, configuração de mocks ou a pasta `node_modules`.

## 4. Atualização do Script no `package.json`

Para facilitar a geração do relatório de cobertura, o script `test` no `package.json` foi modificado para incluir a flag `--coverage`:

```json
// package.json
"scripts": {
  // ...
  "test": "vitest --coverage"
},
```
Isso garante que, sempre que o comando `npm test` for executado, o relatório de cobertura seja gerado automaticamente.

## 5. Ignorando o Relatório no Git

O diretório `coverage/`, que contém os relatórios gerados, não deve ser versionado no Git. Para isso, ele foi adicionado ao arquivo `.gitignore`:

```
# .gitignore

/coverage
```

## 6. Executando e Visualizando o Relatório

Para gerar e visualizar o relatório de cobertura, siga os passos:

1.  **Execute o comando de teste:**
    ```bash
    npm test
    ```
    Ao final da execução, você verá um resumo da cobertura diretamente no seu terminal.

2.  **Abra o relatório HTML:**
    O comando acima irá gerar um diretório `coverage/` na raiz do projeto. Para uma visualização detalhada e interativa, abra o arquivo `index.html` que está dentro de `coverage/html/` no seu navegador de preferência.

    Este relatório permite navegar pelos arquivos e ver exatamente quais linhas de código foram ou não cobertas pelos testes.