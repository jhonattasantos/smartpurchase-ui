# 6. Refatoração da Página de Cadastro de Empresa (Container/Presentational)

Este documento descreve a refatoração aplicada à página de cadastro de empresa, que originalmente possuía um alto acoplamento de responsabilidades.

## Problema

O componente `src/pages/Company/Register/index.tsx` era responsável por:

1.  **Renderização da UI:** Exibir o formulário, campos e botões.
2.  **Gerenciamento de Estado do Formulário:** Controlar os dados com `react-hook-form`.
3.  **Lógica de Negócio e Efeitos Colaterais:** Chamar o hook `useRegisterCompany` para interagir com a API e gerenciar os estados de loading, sucesso e erro.

Essa mistura dificultava os testes de unidade da UI, que ficava dependente da lógica de chamada da API, e violava o princípio de Separação de Responsabilidades.

## Solução: Padrão Container/Presentational

Para resolver o problema, separamos as responsabilidades em dois componentes distintos:

### 1. Componente de Apresentação (`CompanyForm.tsx`)

-   **Localização:** `src/components/Company/CompanyForm.tsx`
-   **Responsabilidade:** Apenas renderizar a interface do formulário. É um componente "burro" que não sabe como os dados são enviados ou recebidos.
-   **Funcionamento:** Recebe todos os dados e funções necessárias via `props` (ex: `register`, `handleSubmit`, `isLoading`, `onSubmit`).
-   **Testes:** Testado de forma unitária e isolada (`CompanyForm.test.tsx`), verificando apenas a renderização correta da UI para cada estado (loading, erro, etc.) com base nas `props` recebidas.

### 2. Componente Container (`CompanyRegistration/index.tsx`)

-   **Localização:** `src/pages/Company/Register/index.tsx` (arquivo refatorado)
-   **Responsabilidade:** Orquestrar a lógica e gerenciar o estado. É o componente "inteligente".
-   **Funcionamento:** Utiliza os hooks (`useForm`, `useRegisterCompany`) para gerenciar o estado do formulário e a lógica de mutação. Ele renderiza o componente `CompanyForm` e passa para ele as `props` necessárias.
-   **Testes:** Testado como um teste de integração (`index.test.tsx`), mas com o **hook `useRegisterCompany` mocado**. Isso nos permite verificar o comportamento do componente (ex: se ele chama a função `submitCompany` com os dados corretos) sem depender da camada de rede (MirageJS ou API real), garantindo um teste de integração focado na lógica do próprio componente.

## Benefícios da Nova Arquitetura

-   **Separação de Responsabilidades:** A lógica de UI está completamente desacoplada da lógica de negócio.
-   **Testabilidade Aprimorada:**
    -   Testes de UI puros e rápidos para o componente de formulário.
    -   Testes de integração focados na lógica do container, sem a complexidade da camada de rede.
    -   Os testes do MirageJS continuam garantindo a correta implementação da camada de serviço da API.
-   **Reutilização:** O `CompanyForm` pode ser facilmente reutilizado em outras partes da aplicação com diferentes lógicas de submissão.
